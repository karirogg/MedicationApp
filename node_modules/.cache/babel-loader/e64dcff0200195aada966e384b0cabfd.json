{"ast":null,"code":"import _toConsumableArray from\"/Users/bollo/Documents/Kari/Forritun/MedicationApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/bollo/Documents/Kari/Forritun/MedicationApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bollo/Documents/Kari/Forritun/MedicationApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/bollo/Documents/Kari/Forritun/MedicationApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bollo/Documents/Kari/Forritun/MedicationApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'../CSS/AddWindow.css';import{addMeds}from'../Actions/add-meds-action';import{editMeds}from'../Actions/edit-meds-action';import{deleteMeds}from'../Actions/delete-meds-action';import{bindActionCreators}from'redux';import{connect}from'react-redux';import NewDose from'./NewDose';var AddWindow=/*#__PURE__*/function(_Component){_inherits(AddWindow,_Component);var _super=_createSuper(AddWindow);function AddWindow(){var _this;_classCallCheck(this,AddWindow);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={name:_this.props.med.name,doses:_this.props.med.doses};_this.formatDate=function(num){if(String(num).length===1)return\"0\"+String(num);if(num===\"\")return\"00\";return\"\"+num;};_this.hr_up=function(i){var hr=parseInt(_this.state.doses[i].hour);if(_this.state.doses[i].hour===\"\")hr=0;hr++;if(hr>23)hr=0;var state_copy=JSON.parse(JSON.stringify(_this.state));state_copy.doses[i].hour=_this.formatDate(hr);_this.setState(state_copy);};_this.hr_down=function(i){var hr=parseInt(_this.state.doses[i].hour);if(_this.state.hour===\"\")hr=0;hr--;if(hr<0)hr=23;var state_copy=JSON.parse(JSON.stringify(_this.state));state_copy.doses[i].hour=_this.formatDate(hr);_this.setState(state_copy);};_this.min_up=function(i){var hr=parseInt(_this.state.doses[i].hour);var min=parseInt(_this.state.doses[i].minute);if(_this.state.doses[i].minute===\"\")min=0;if(_this.state.doses[i].hour===\"\")hr=0;min+=30;if(min>=60){min=0;hr++;if(hr>23)hr=0;}var state_copy=JSON.parse(JSON.stringify(_this.state));state_copy.doses[i].minute=_this.formatDate(min);state_copy.doses[i].hour=_this.formatDate(hr);_this.setState(state_copy);};_this.min_down=function(i){var hr=parseInt(_this.state.doses[i].hour);var min=parseInt(_this.state.doses[i].minute);if(_this.state.doses[i].hour===\"\")hr=0;if(_this.state.doses[i].minute===\"\")min=0;min-=30;if(min<0){min=30;hr--;if(hr<0)hr=23;}var state_copy=JSON.parse(JSON.stringify(_this.state));state_copy.doses[i].minute=_this.formatDate(min);state_copy.doses[i].hour=_this.formatDate(hr);_this.setState(state_copy);};_this.edit_minute=function(value,i){var state_copy=JSON.parse(JSON.stringify(_this.state));state_copy.doses[i].minute=value;_this.setState(state_copy);};_this.edit_hour=function(value,i){var state_copy=JSON.parse(JSON.stringify(_this.state));state_copy.doses[i].hour=value;_this.setState(state_copy);};_this.edit_amount=function(value,i){var state_copy=JSON.parse(JSON.stringify(_this.state));state_copy.doses[i].amount=value;_this.setState(state_copy);};_this.edit_name=function(event){var state_copy=JSON.parse(JSON.stringify(_this.state));state_copy.name=event.target.value;_this.setState(state_copy);};_this.removeElementAtIndex=function(i){var state_copy=JSON.parse(JSON.stringify(_this.state));state_copy.doses.splice(i,1);_this.setState(state_copy);};_this.submitMeds=function(){var state_copy=JSON.parse(JSON.stringify(_this.state));for(var i=0;i<state_copy.doses.length;i++){console.log(_this.formatDate(state_copy.doses[i].hour));state_copy.doses[i].hour=_this.formatDate(state_copy.doses[i].hour);state_copy.doses[i].minute=_this.formatDate(state_copy.doses[i].minute);}state_copy.doses.sort(function(a,b){return parseInt(a.hour)-parseInt(b.hour)||parseInt(a.minute)-parseInt(b.minute);});if(state_copy.name!==\"\"){_this.props.toggleAdd();if(_this.props.index===-1){_this.props.addMeds({name:state_copy.name,doses:state_copy.doses});}else{_this.props.editMeds({name:state_copy.name,doses:state_copy.doses},_this.props.index);}}else{alert(\"You cannot add empty medication\");}};_this.addDose=function(){_this.setState({name:_this.state.name,doses:[].concat(_toConsumableArray(_this.state.doses),[{amount:\"75mg\",hour:\"09\",minute:\"00\"}])});};return _this;}_createClass(AddWindow,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"dim-background\",onClick:this.props.toggleAdd}),/*#__PURE__*/React.createElement(\"div\",{className:\"add-window\"},/*#__PURE__*/React.createElement(\"div\",{className:\"top\"},/*#__PURE__*/React.createElement(\"p\",null,\"B\\xE6ta vi\\xF0 lyfjagj\\xF6f\")),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"name-input\",onChange:this.edit_name,placeholder:\"Nafn lyfs\",value:this.state.name}),this.state.doses.map(function(dose,i){return/*#__PURE__*/React.createElement(NewDose,{key:i,id:i,dose:dose,hr_up:_this2.hr_up,hr_down:_this2.hr_down,min_up:_this2.min_up,min_down:_this2.min_down,edit_minute:_this2.edit_minute,edit_hour:_this2.edit_hour,edit_amount:_this2.edit_amount,removeElementAtIndex:_this2.removeElementAtIndex});}),/*#__PURE__*/React.createElement(\"div\",{className:\"button-holder\"},/*#__PURE__*/React.createElement(\"button\",{className:\"add-dose\",onClick:this.addDose},\"N\\xFDr skammtur\"),this.props.index>=0?/*#__PURE__*/React.createElement(\"button\",{className:\"delete-medication\",onClick:function onClick(){_this2.props.toggleAdd();_this2.props.deleteMeds(_this2.props.index);}},\"Ey\\xF0a\"):null,/*#__PURE__*/React.createElement(\"button\",{className:\"save\",type:\"submit\",onClick:this.submitMeds},\"Vista\"))));}}]);return AddWindow;}(Component);function matchDispatchToProps(dispatch){return bindActionCreators({addMeds:addMeds,editMeds:editMeds,deleteMeds:deleteMeds},dispatch);}export default connect(null,matchDispatchToProps)(AddWindow);","map":{"version":3,"sources":["/Users/bollo/Documents/Kari/Forritun/MedicationApp/src/Components/AddWindow.js"],"names":["React","Component","addMeds","editMeds","deleteMeds","bindActionCreators","connect","NewDose","AddWindow","state","name","props","med","doses","formatDate","num","String","length","hr_up","i","hr","parseInt","hour","state_copy","JSON","parse","stringify","setState","hr_down","min_up","min","minute","min_down","edit_minute","value","edit_hour","edit_amount","amount","edit_name","event","target","removeElementAtIndex","splice","submitMeds","console","log","sort","a","b","toggleAdd","index","alert","addDose","map","dose","matchDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport '../CSS/AddWindow.css';\nimport {addMeds} from '../Actions/add-meds-action';\nimport {editMeds} from '../Actions/edit-meds-action';\nimport {deleteMeds} from '../Actions/delete-meds-action';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport NewDose from './NewDose';\n\nclass AddWindow extends Component {\n    state = {\n        name: this.props.med.name,\n        doses: this.props.med.doses, \n    };\n\n    formatDate = (num) => {\n        if(String(num).length === 1) return(\"0\" + String(num));\n        if(num === \"\") return(\"00\");\n        return(\"\"+num);\n    }\n    hr_up = (i) => {\n        let hr = parseInt(this.state.doses[i].hour);\n        if(this.state.doses[i].hour === \"\") hr = 0;\n        hr++;\n        if(hr > 23) hr = 0;\n        var state_copy = JSON.parse(JSON.stringify(this.state));\n        state_copy.doses[i].hour = this.formatDate(hr);\n        this.setState(state_copy);\n    }\n    hr_down = (i) => {\n        let hr = parseInt(this.state.doses[i].hour);\n        if(this.state.hour === \"\") hr = 0;\n        hr--;\n        if(hr < 0) hr = 23;\n        var state_copy = JSON.parse(JSON.stringify(this.state));\n        state_copy.doses[i].hour = this.formatDate(hr);\n        this.setState(state_copy);\n    }\n    min_up = (i) => {\n        let hr = parseInt(this.state.doses[i].hour);\n        let min = parseInt(this.state.doses[i].minute);\n        if(this.state.doses[i].minute === \"\") min = 0;\n        if(this.state.doses[i].hour === \"\") hr = 0;\n\n        min += 30;\n        if(min >= 60) {\n            min = 0;\n            hr++;\n            if(hr > 23) hr = 0;\n        }\n        var state_copy = JSON.parse(JSON.stringify(this.state));\n        state_copy.doses[i].minute = this.formatDate(min);\n        state_copy.doses[i].hour = this.formatDate(hr);\n        this.setState(state_copy);\n    }\n    min_down = (i) => {\n        let hr = parseInt(this.state.doses[i].hour);\n        let min = parseInt(this.state.doses[i].minute);\n        if(this.state.doses[i].hour === \"\") hr = 0;\n        if(this.state.doses[i].minute === \"\") min = 0;\n\n        min -= 30;\n        if(min < 0) {\n            min = 30;\n            hr--;\n            if(hr < 0) hr = 23;\n        }\n        var state_copy = JSON.parse(JSON.stringify(this.state));\n        state_copy.doses[i].minute = this.formatDate(min);\n        state_copy.doses[i].hour = this.formatDate(hr);\n        this.setState(state_copy);\n    }\n\n    edit_minute = (value, i) => {\n        let state_copy = JSON.parse(JSON.stringify(this.state));\n        state_copy.doses[i].minute = value;\n        this.setState(state_copy);\n    }\n    edit_hour = (value, i) => {\n        let state_copy = JSON.parse(JSON.stringify(this.state));\n        state_copy.doses[i].hour = value;\n        this.setState(state_copy);\n    }\n    edit_amount = (value, i) => {\n        let state_copy = JSON.parse(JSON.stringify(this.state));\n        state_copy.doses[i].amount = value;\n        this.setState(state_copy);\n    }\n    edit_name = (event) => {\n        let state_copy = JSON.parse(JSON.stringify(this.state));\n        state_copy.name = event.target.value;\n        this.setState(state_copy);\n    }\n\n    removeElementAtIndex = (i) => {\n        let state_copy = JSON.parse(JSON.stringify(this.state));\n        state_copy.doses.splice(i, 1);\n        this.setState(state_copy);\n    }\n\n    submitMeds = () => {\n        var state_copy = JSON.parse(JSON.stringify(this.state));\n        for(let i = 0; i< state_copy.doses.length; i++) {\n            console.log(this.formatDate(state_copy.doses[i].hour));\n            state_copy.doses[i].hour = this.formatDate(state_copy.doses[i].hour);\n            state_copy.doses[i].minute = this.formatDate(state_copy.doses[i].minute);\n        }\n\n        state_copy.doses.sort((a,b) => (parseInt(a.hour) - parseInt(b.hour) || parseInt(a.minute)-parseInt(b.minute)));\n\n        if(state_copy.name !== \"\") {\n            this.props.toggleAdd();\n            if(this.props.index === -1) {\n                this.props.addMeds({                    \n                    name: state_copy.name,                \n                    doses: state_copy.doses,\n                });\n            } else {\n                this.props.editMeds({                    \n                    name: state_copy.name,                \n                    doses: state_copy.doses,\n                }, this.props.index);\n            }\n        } else {\n            alert(\"You cannot add empty medication\");\n        }\n    }\n    addDose = () => {\n        this.setState({\n            name: this.state.name,\n            doses: [...this.state.doses, {amount:\"75mg\", hour:\"09\", minute:\"00\"}]});\n    }\n\n    render() {\n        return(\n            <div>\n                <div className='dim-background' onClick={this.props.toggleAdd}></div>\n                <div className='add-window'>\n                    <div className=\"top\"><p>Bæta við lyfjagjöf</p></div>\n                    <input type=\"text\" className=\"name-input\" onChange={this.edit_name} placeholder=\"Nafn lyfs\" value={this.state.name} />\n                    {this.state.doses.map((dose, i) => {\n                        return(<NewDose key={i} id={i} dose={dose} hr_up={this.hr_up} hr_down={this.hr_down} min_up={this.min_up} min_down={this.min_down} edit_minute={this.edit_minute} edit_hour={this.edit_hour} edit_amount={this.edit_amount} removeElementAtIndex={this.removeElementAtIndex} />);\n                    })}\n                    <div className=\"button-holder\">\n                        <button className=\"add-dose\" onClick={this.addDose}>Nýr skammtur</button>\n                        {(this.props.index >= 0) ? <button className=\"delete-medication\" onClick={() => {\n                            this.props.toggleAdd();\n                            this.props.deleteMeds(this.props.index);\n                        }}>Eyða</button> : null}\n                        <button className=\"save\" type=\"submit\" onClick={this.submitMeds}>Vista</button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nfunction matchDispatchToProps(dispatch) {\n    return bindActionCreators({addMeds: addMeds, editMeds: editMeds, deleteMeds: deleteMeds}, dispatch);\n}\n\n\nexport default connect(null, matchDispatchToProps)(AddWindow);"]},"metadata":{},"sourceType":"module"}