{"ast":null,"code":"var _jsxFileName = \"/Users/bollo/Documents/Kari/Forritun/MedicationApp/src/Components/MedsTable.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport '../CSS/Info.css';\n\nclass MedsTable extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.formatDate = num => {\n      if (num < 10) return \"0\" + String(num);\n      return \"\" + num;\n    };\n\n    this.relevantTimelabels = () => {\n      let relevant = [];\n      const timeLabels = [];\n\n      for (let i = 0; i < 24; i++) {\n        timeLabels.push(this.formatDate(i) + \":00\");\n        timeLabels.push(this.formatDate(i) + \":30\");\n      }\n\n      outer: for (let i = 0; i < 48; i++) {\n        for (let j = 0; j < this.props.meds.length; j++) {\n          for (let k = 0; k < this.props.meds[j].doses.length; k++) {\n            if (parseInt(this.props.meds[j].doses[k].hour) === Math.floor(i / 2) && parseInt(this.props.meds[j].doses[k].minute) === 30 * (i % 2)) {\n              relevant.push(timeLabels[i]);\n              continue outer;\n            }\n          }\n        }\n      }\n\n      console.log(relevant);\n      return relevant;\n    };\n\n    this.summarizeAmounts = doses => {\n      let count = [];\n\n      for (let i = 0; i < doses.length; i++) {\n        let included = false;\n\n        for (let j = 0; j < count.length; j++) {\n          if (count[j].amount === doses[i].amount) {\n            count[j].total++;\n          }\n        }\n\n        if (included === false) {\n          count.push({\n            amount: doses[i].amount,\n            total: 1\n          });\n        }\n      }\n\n      var s = \"\";\n\n      for (let i = 0; i < count.length; i++) {\n        if (i > 0) s += \" + \";\n        s += count[i].total + \"x\" + count[i].amount;\n      }\n\n      return s;\n    };\n  }\n\n  render() {\n    let timeLabels = this.relevantTimelabels();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: this.props.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"medication-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 29\n      }\n    }, \"Nafn\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 29\n      }\n    }, \"Magn\"), timeLabels.map(time => /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 56\n      }\n    }, time)))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }\n    }, this.props.meds ? this.props.meds.map((med, i) => {\n      let k = 0;\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 36\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 37\n        }\n      }, med.name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 37\n        }\n      }, this.summarizeAmounts(med.doses)), timeLabels.map((time, j) => {\n        let value = \"\";\n        let dose = this.props.meds[j].doses[k];\n        console.log(\"dose: \" + dose);\n        console.log(time);\n        console.log(\"Time: \" + (dose.hour + \":\" + dose.minute));\n        console.log(\"if: \" + (dose.hour + \":\" + dose.minute === time));\n\n        if (dose && dose.hour + \":\" + dose.minute === time) {\n          value = this.props.meds[j].doses[k].amount;\n          k++;\n        }\n\n        return /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 48\n          }\n        }, value);\n      }));\n    }) : null)));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    meds: state.meds\n  };\n}\n\nexport default connect(mapStateToProps)(MedsTable);","map":{"version":3,"sources":["/Users/bollo/Documents/Kari/Forritun/MedicationApp/src/Components/MedsTable.js"],"names":["React","Component","connect","MedsTable","formatDate","num","String","relevantTimelabels","relevant","timeLabels","i","push","outer","j","props","meds","length","k","doses","parseInt","hour","Math","floor","minute","console","log","summarizeAmounts","count","included","amount","total","s","render","id","map","time","med","name","value","dose","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport '../CSS/Info.css';\n\nclass MedsTable extends Component {\n    formatDate = (num) => {\n        if(num < 10) return(\"0\" + String(num));\n        return(\"\"+num);\n    }\n\n    // Needs optimizing, think about sorting etc.\n    relevantTimelabels = () => {\n        let relevant = [];\n        const timeLabels = [];\n\n        for(let i = 0; i<24; i++) {\n            timeLabels.push(this.formatDate(i) + \":00\");\n            timeLabels.push(this.formatDate(i) + \":30\");\n        }\n\n        outer:\n        for(let i = 0; i < 48; i++) {\n            for(let j = 0; j<this.props.meds.length; j++) {\n                for(let k = 0; k<this.props.meds[j].doses.length; k++) {\n                    if(parseInt(this.props.meds[j].doses[k].hour) === Math.floor(i/2) && parseInt(this.props.meds[j].doses[k].minute) === 30*(i%2)) {\n                        relevant.push(timeLabels[i]);\n                        continue outer;\n                    }\n                }\n            } \n        }\n        console.log(relevant);\n        return(relevant)\n    }\n\n    // Needs optimizing, think about sorting etc.\n    summarizeAmounts = (doses) => {\n        let count = [];\n        for(let i = 0; i<doses.length; i++) {\n            let included = false;\n            for(let j = 0; j<count.length; j++) {\n                if(count[j].amount === doses[i].amount) {\n                    count[j].total++;\n                }\n            }\n            if(included === false) {\n                count.push({amount: doses[i].amount, total: 1});\n            }\n\n        }\n\n        var s = \"\";\n\n        for(let i = 0; i<count.length; i++) {\n            if(i > 0) s += \" + \"\n            s += count[i].total + \"x\" + count[i].amount;\n        }\n\n        return s;\n    }\n\n    render() {\n        let timeLabels = this.relevantTimelabels();\n\n        return(<div key={this.props.id}>\n                <table className=\"medication-info\">\n                    <thead>\n                        <tr>\n                            <th>Nafn</th>\n                            <th>Magn</th>\n                            {timeLabels.map((time) => (<th>{time}</th>))}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {this.props.meds ? this.props.meds.map((med, i) => {\n                            let k = 0;\n                            return(<tr key={i}>\n                                    <td key={i}>{med.name}</td>\n                                    <td>{this.summarizeAmounts(med.doses)}</td>\n                                    {timeLabels.map((time, j) => {\n                                        let value = \"\";\n                                        let dose = this.props.meds[j].doses[k];\n                                        console.log(\"dose: \" + dose);\n                                        console.log(time);\n                                        console.log(\"Time: \" + (dose.hour + \":\" + dose.minute));\n                                        console.log(\"if: \" + ((dose.hour + \":\" + dose.minute) === time))\n                                        if (dose && (dose.hour + \":\" + dose.minute) === time) {\n                                            value = this.props.meds[j].doses[k].amount;\n                                            k++;\n                                        }\n                                        return(<td>{value}</td>);\n                                    })}\n                                </tr>);\n                        }) : null}\n                    </tbody>\n                </table>\n            </div>);\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {meds: state.meds};\n}\n\nexport default connect(mapStateToProps)(MedsTable);"]},"metadata":{},"sourceType":"module"}