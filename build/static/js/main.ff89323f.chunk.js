(this.webpackJsonpmedicationtest=this.webpackJsonpmedicationtest||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},16:function(e,t,n){e.exports=n(30)},21:function(e,t,n){},22:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(7),r=n.n(s),i=(n(21),n(12),n(1)),d=n(2),u=n(4),l=n(3),m=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"header"})}}]),n}(a.Component),c=(n(13),n(15)),p=(n(22),function(e){return console.log("New meds added: "+e.name),console.log("Doses: "+e.doses),{type:"NEW_MEDICATION",payload:e}}),h=function(e,t){return console.log("Medication edited at index "+t),{type:"EDIT_MEDICATION",payload:{med:e,index:t}}},f=function(e){return console.log("Medication deleted on index: "+e),{type:"DELETE_MEDICATION",payload:e}},v=n(5),g=n(6),E=(n(29),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).hourEdited=function(t){var n=t.target.value;n.length<=2&&e.props.edit_hour(n.replace(/[^0-9]+/g,""),e.props.id)},e.minuteEdited=function(t){var n=t.target.value;n.length<=2&&e.props.edit_minute(n.replace(/[^0-9]+/g,""),e.props.id)},e.amountEdited=function(t){e.props.edit_amount(t.target.value,e.props.id)},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"new-dose"},o.a.createElement("div",{className:"select-amount"},o.a.createElement("select",{ref:"amount",onChange:this.amountEdited},o.a.createElement("option",{value:"75mg",selected:!0},"75mg"),o.a.createElement("option",{value:"150mg"},"150mg"),o.a.createElement("option",{value:"500mg"},"500mg"))),o.a.createElement("div",{className:"time-picker"},o.a.createElement("div",{className:"hour"},o.a.createElement("div",{className:"hr-up",onClick:function(){e.props.hr_up(e.props.id)}}),o.a.createElement("input",{type:"text",ref:function(t){return e.hour_input=t},className:"hr",onChange:this.hourEdited.bind(this),value:this.props.dose.hour,max:"99"}),o.a.createElement("div",{className:"hr-down",onClick:function(){e.props.hr_down(e.props.id)}})),o.a.createElement("div",{className:"separator"},":"),o.a.createElement("div",{className:"minute"},o.a.createElement("div",{className:"min-up",onClick:function(){e.props.min_up(e.props.id)}}),o.a.createElement("input",{type:"text",ref:function(t){return e.minute_input=t},className:"min",onChange:this.minuteEdited.bind(this),value:this.props.dose.minute,max:"99"}),o.a.createElement("div",{className:"min-down",onClick:function(){e.props.min_down(e.props.id)}}))),o.a.createElement("button",{className:"remove-element",onClick:function(){return e.props.removeElementAtIndex(e.props.id)}},"Ey\xf0a"))}}]),n}(a.Component)),N=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={name:e.props.med.name,doses:e.props.med.doses},e.formatDate=function(e){return 1===String(e).length?"0"+String(e):""===e?"00":""+e},e.hr_up=function(t){var n=parseInt(e.state.doses[t].hour);""===e.state.doses[t].hour&&(n=0),++n>23&&(n=0);var a=JSON.parse(JSON.stringify(e.state));a.doses[t].hour=e.formatDate(n),e.setState(a)},e.hr_down=function(t){var n=parseInt(e.state.doses[t].hour);""===e.state.hour&&(n=0),--n<0&&(n=23);var a=JSON.parse(JSON.stringify(e.state));a.doses[t].hour=e.formatDate(n),e.setState(a)},e.min_up=function(t){var n=parseInt(e.state.doses[t].hour),a=parseInt(e.state.doses[t].minute);""===e.state.doses[t].minute&&(a=0),""===e.state.doses[t].hour&&(n=0),(a+=30)>=60&&(a=0,++n>23&&(n=0));var o=JSON.parse(JSON.stringify(e.state));o.doses[t].minute=e.formatDate(a),o.doses[t].hour=e.formatDate(n),e.setState(o)},e.min_down=function(t){var n=parseInt(e.state.doses[t].hour),a=parseInt(e.state.doses[t].minute);""===e.state.doses[t].hour&&(n=0),""===e.state.doses[t].minute&&(a=0),(a-=30)<0&&(a=30,--n<0&&(n=23));var o=JSON.parse(JSON.stringify(e.state));o.doses[t].minute=e.formatDate(a),o.doses[t].hour=e.formatDate(n),e.setState(o)},e.edit_minute=function(t,n){var a=JSON.parse(JSON.stringify(e.state));a.doses[n].minute=t,e.setState(a)},e.edit_hour=function(t,n){var a=JSON.parse(JSON.stringify(e.state));a.doses[n].hour=t,e.setState(a)},e.edit_amount=function(t,n){var a=JSON.parse(JSON.stringify(e.state));a.doses[n].amount=t,e.setState(a)},e.edit_name=function(t){var n=JSON.parse(JSON.stringify(e.state));n.name=t.target.value,e.setState(n)},e.removeElementAtIndex=function(t){var n=JSON.parse(JSON.stringify(e.state));n.doses.splice(t,1),e.setState(n)},e.submitMeds=function(){for(var t=JSON.parse(JSON.stringify(e.state)),n=0;n<t.doses.length;n++)console.log(e.formatDate(t.doses[n].hour)),t.doses[n].hour=e.formatDate(t.doses[n].hour),t.doses[n].minute=e.formatDate(t.doses[n].minute);t.doses.sort((function(e,t){return parseInt(e.hour)-parseInt(t.hour)||parseInt(e.minute)-parseInt(t.minute)})),""!==t.name?(e.props.toggleAdd(),-1===e.props.index?e.props.addMeds({name:t.name,doses:t.doses}):e.props.editMeds({name:t.name,doses:t.doses},e.props.index)):alert("You cannot add empty medication")},e.addDose=function(){e.setState({name:e.state.name,doses:[].concat(Object(c.a)(e.state.doses),[{amount:"75mg",hour:"09",minute:"00"}])})},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"dim-background",onClick:this.props.toggleAdd}),o.a.createElement("div",{className:"add-window"},o.a.createElement("div",{className:"top"},o.a.createElement("p",null,"B\xe6ta vi\xf0 lyfjagj\xf6f")),o.a.createElement("input",{type:"text",className:"name-input",onChange:this.edit_name,placeholder:"Nafn lyfs",value:this.state.name}),this.state.doses.map((function(t,n){return o.a.createElement(E,{key:n,id:n,dose:t,hr_up:e.hr_up,hr_down:e.hr_down,min_up:e.min_up,min_down:e.min_down,edit_minute:e.edit_minute,edit_hour:e.edit_hour,edit_amount:e.edit_amount,removeElementAtIndex:e.removeElementAtIndex})})),o.a.createElement("div",{className:"button-holder"},o.a.createElement("button",{className:"add-dose",onClick:this.addDose},"N\xfdr skammtur"),this.props.index>=0?o.a.createElement("button",{className:"delete-medication",onClick:function(){e.props.toggleAdd(),e.props.deleteMeds(e.props.index)}},"Ey\xf0a"):null,o.a.createElement("button",{className:"save",type:"submit",onClick:this.submitMeds},"Vista"))))}}]),n}(a.Component);var O=Object(g.b)(null,(function(e){return Object(v.a)({addMeds:p,editMeds:h,deleteMeds:f},e)}))(N),y=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).formatDate=function(e){return parseInt(e)<10?"0"+String(e):""+e},e.relevantTimelabels=function(){for(var t=[],n=[],a=0;a<24;a++)n.push(e.formatDate(a)+":00"),n.push(e.formatDate(a)+":30");e:for(var o=0;o<48;o++)for(var s=0;s<e.props.meds.length;s++)for(var r=0;r<e.props.meds[s].doses.length;r++)if(parseInt(e.props.meds[s].doses[r].hour)===Math.floor(o/2)&&parseInt(e.props.meds[s].doses[r].minute)===o%2*30){t.push(n[o]);continue e}return t},e.summarizeAmounts=function(e){for(var t=[],n=0;n<e.length;n++){for(var a=0;a<t.length;a++)t[a].amount===e[n].amount&&t[a].total++;t.push({amount:e[n].amount,total:1})}for(var o="",s=0;s<t.length;s++)s>0&&(o+=" + "),o+=t[s].total+"x"+t[s].amount;return o},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.relevantTimelabels();return o.a.createElement("div",{key:this.props.id},o.a.createElement("table",{className:"medication-info"},o.a.createElement("thead",null,o.a.createElement("tr",null,t.length>0?o.a.createElement("th",null,"Nafn"):null,t.length>0?o.a.createElement("th",null,"Magn"):null,t.map((function(e){return o.a.createElement("th",null,e)})))),o.a.createElement("tbody",null,this.props.meds?this.props.meds.map((function(n,a){var s=0;return o.a.createElement("tr",{onClick:function(){return e.props.toggleAdd(e.props.meds[a],a)},key:a},o.a.createElement("td",{key:a},n.name),o.a.createElement("td",null,e.summarizeAmounts(n.doses)),t.map((function(t,n){var r="";console.log(JSON.stringify(e.props.meds[a]));var i=e.props.meds[a].doses[s];return i&&i.hour+":"+i.minute===t&&(r=e.props.meds[a].doses[s].amount,s++),o.a.createElement("td",null,r)})))})):null)))}}]),n}(a.Component);var b=Object(g.b)((function(e){return{meds:e.meds}}))(y),_=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={seen:!1,openAddWindowMed:{name:"",doses:[{amount:"75mg",hour:"09",minute:"00"}]}},e.toggleAdd=function(t,n){e.setState({seen:!e.state.seen,openAddWindowMed:t,openAddWindowIndex:n})},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("button",{className:"add-meds",onClick:function(){return e.toggleAdd({name:"",doses:[{amount:"75mg",hour:"09",minute:"00"}]},-1)}},"Add"),this.state.seen?o.a.createElement(O,{toggleAdd:this.toggleAdd,med:this.state.openAddWindowMed,index:this.state.openAddWindowIndex}):null,o.a.createElement(b,{key:0,id:0,toggleAdd:this.toggleAdd}))}}]),n}(a.Component);var S=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(m,null),o.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=Object(v.b)({meds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=JSON.parse(JSON.stringify(e));switch(t.type){case"NEW_MEDICATION":n.push(t.payload);break;case"EDIT_MEDICATION":n[t.payload.index].doses=t.payload.med.doses;break;case"DELETE_MEDICATION":n.splice(t.payload,1)}return n}}),A=Object(v.c)(I);r.a.render(o.a.createElement(g.a,{store:A},o.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.ff89323f.chunk.js.map